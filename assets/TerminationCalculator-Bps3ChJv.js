import{r as A,j as a}from"./index-CgjhHoxX.js";import{L as he,r as c,f as Z,C as ge,M as K,B as ee,a as xe,b as fe,R as ve}from"./MoneyInput-BBkuzB88.js";import{S as ae}from"./Select-DppD5Y6B.js";import{I as oe}from"./Input-Chm5vmIX.js";import{c as se,a as te}from"./taxes-s8EbFpoH.js";const re=({label:e,value:i,onChange:l,helperText:t,tooltip:s})=>{const[d,n]=A.useState(""),[D,g]=A.useState(""),[f,o]=A.useState("");A.useEffect(()=>{if(i){const[r,h,N]=i.split("-");o(r),g(h),n(N)}else o(""),g(""),n("")},[i]);const u=(r,h)=>{let N=r==="day"?h:d,j=r==="month"?h:D,w=r==="year"?h:f;r==="day"&&n(h),r==="month"&&g(h),r==="year"&&o(h),N&&j&&w&&l(`${w}-${j}-${N}`)},x=Array.from({length:31},(r,h)=>(h+1).toString().padStart(2,"0")),b=Array.from({length:12},(r,h)=>(h+1).toString().padStart(2,"0")),p=new Date().getFullYear(),v=Array.from({length:100},(r,h)=>(p-50+h).toString()).reverse(),y="appearance-none bg-white border border-gray-300 text-gray-900 text-xl rounded-xl focus:ring-4 focus:ring-primary/10 focus:border-primary block w-full py-4 px-3 outline-none transition-all hover:border-gray-400 cursor-pointer text-center shadow-sm h-[64px]";return a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsx(he,{label:e,tooltip:s}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-1 min-w-[90px]",children:a.jsxs("select",{value:d,onChange:r=>u("day",r.target.value),className:y,children:[a.jsx("option",{value:"",children:"Dia"}),x.map(r=>a.jsx("option",{value:r,children:r},r))]})}),a.jsx("div",{className:"flex-1 min-w-[90px]",children:a.jsxs("select",{value:D,onChange:r=>u("month",r.target.value),className:y,children:[a.jsx("option",{value:"",children:"Mês"}),b.map(r=>a.jsx("option",{value:r,children:r},r))]})}),a.jsx("div",{className:"flex-[1.5] min-w-[110px]",children:a.jsxs("select",{value:f,onChange:r=>u("year",r.target.value),className:y,children:[a.jsx("option",{value:"",children:"Ano"}),v.map(r=>a.jsx("option",{value:r,children:r},r))]})})]}),t&&a.jsx("p",{className:"text-sm text-gray-500 mt-2 ml-1 font-medium",children:t})]})};var m=(e=>(e.SEM_JUSTA_CAUSA="Dispensa sem justa causa",e.PEDIDO_DEMISSAO="Pedido de demissão",e.JUSTA_CAUSA="Dispensa com justa causa",e.COMUM_ACORDO="Rescisão por comum acordo",e.TERMINO_EXPERIENCIA="Término de contrato de experiência",e.ANTECIPADO_EMPREGADOR="Antecipação experiência (Empregador)",e.ANTECIPADO_EMPREGADO="Antecipação experiência (Empregado)",e))(m||{}),C=(e=>(e.TRABALHADO="Trabalhado",e.INDENIZADO="Indenizado",e.NAO_CUMPRIDO="Não cumprido (Descontado)",e))(C||{});const Se=(e,i)=>{let l=i.getFullYear()-e.getFullYear();const t=i.getMonth()-e.getMonth();return(t<0||t===0&&i.getDate()<e.getDate())&&l--,Math.max(0,l)},ie=(e,i)=>{const l=new Date(e);return l.setDate(l.getDate()+i),l},V=(e,i)=>{if(e>i)return 0;let l=0;const t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(i.getFullYear(),i.getMonth(),i.getDate());let d=t.getFullYear(),n=t.getMonth();const D=s.getFullYear(),g=s.getMonth();for(;d<D||d===D&&n<=g;){const f=new Date(d,n,1),o=new Date(d,n+1,0),u=t>f?t:f,x=s<o?s:o;if(u<=x){const b=Math.abs(x.getTime()-u.getTime());Math.ceil(b/(1e3*60*60*24))+1>=15&&l++}n++,n>11&&(n=0,d++)}return l},ne=(e,i)=>{const l=i.getFullYear();let t=new Date(e);e.getFullYear()<l&&(t=new Date(l,0,1));const s=V(t,i);return Math.min(12,Math.max(0,s))},De=(e,i)=>{if(e>i)return 0;let l=new Date(e);for(;;){const s=new Date(l.getFullYear()+1,e.getMonth(),e.getDate());if(s>i)break;l=s}const t=V(l,i);return Math.min(12,Math.max(0,t))},be=(e,i,l,t,s,d,n=0,D=0)=>{const g=c(Math.max(0,l)),f=new Date(e+"T12:00:00"),o=new Date(i+"T12:00:00"),u=[],x=[],b=[];let p=0,v=0;const r=c(g/30),h=o.getDate(),N=Math.min(30,h),j=c(r*N);u.push({label:`Saldo de Salário (${N} dias)`,value:j,description:"Art. 64 CLT. Proporcional aos dias trabalhados no mês."}),p+=j;const w=Se(f,o),E=Math.min(90,30+w*3);let M=0,O=new Date(o);if(t===m.SEM_JUSTA_CAUSA)s===C.INDENIZADO&&(M=c(r*E),u.push({label:`Aviso Prévio Indenizado (${E} dias)`,value:M,description:"Lei 12.506/11. Valor indenizado (Isento de INSS)."}),p+=M,O=ie(o,E));else if(t===m.PEDIDO_DEMISSAO){if(s===C.NAO_CUMPRIDO){const S=c(g);x.push({label:"Desconto Aviso Prévio Não Cumprido",value:-S,isDeduction:!0,description:"Art. 487 §2º CLT. Valor de um salário nominal."}),v+=S}}else t===m.COMUM_ACORDO&&s===C.INDENIZADO&&(M=c(r*E/2),u.push({label:"Aviso Prévio Indenizado (50%)",value:M,description:"Art. 484-A CLT."}),p+=M,O=ie(o,E));if(t!==m.JUSTA_CAUSA){const S=ne(f,O),$=c(g/12*S);$>0&&(u.push({label:`13º Salário Proporcional (${S}/12 avos)`,value:$,description:"Inclui projeção do aviso prévio (se indenizado)."}),p+=$)}const _=c(g/30*Math.max(0,d));_>0&&(u.push({label:`Férias Vencidas (${d} dias)`,value:_}),p+=_);let R=0;if(t!==m.JUSTA_CAUSA){const S=De(f,O);R=c(g/12*S),R>0&&(u.push({label:`Férias Proporcionais (${S}/12 avos)`,value:R,description:"Conta período aquisitivo + projeção aviso."}),p+=R)}const le=_+R,k=c(le/3);k>0&&(u.push({label:"1/3 Constitucional sobre Férias",value:k}),p+=k);const W=j,F=se(W);F.discount>0&&(x.push({label:"INSS sobre Salário",value:-F.discount,isDeduction:!0}),v+=F.discount);let U=0;if(t!==m.JUSTA_CAUSA){const S=ne(f,O);U=c(g/12*S)}const q=se(U);q.discount>0&&(x.push({label:"INSS sobre 13º Salário",value:-q.discount,isDeduction:!0}),v+=q.discount);const de=Math.max(0,W-F.discount),Y=te(de,D,F.discount);Y>0&&(x.push({label:"IRRF sobre Salários",value:-Y,isDeduction:!0}),v+=Y);const B=te(U,D,q.discount);B>0&&(x.push({label:"IRRF sobre 13º Salário",value:-B,isDeduction:!0}),v+=B);const ce=c(j*.08),ue=c(U*.08),me=t===m.SEM_JUSTA_CAUSA&&s===C.INDENIZADO?c(M*.08):0,H=c(ce+ue+me);let z=c(n),Q=!1;if(n<=0){const S=V(f,o);z=c(g*.08*S),Q=!0}const J=c(z+H);let P=0,T=!1;t===m.SEM_JUSTA_CAUSA||t===m.ANTECIPADO_EMPREGADOR?(P=.4,T=!0):t===m.COMUM_ACORDO?(P=.2,T=!0):t===m.TERMINO_EXPERIENCIA&&(P=0,T=!0);const G=c(J*P);let I=0;T&&(t===m.COMUM_ACORDO?I=c((J+G)*.8):I=c(J+G),b.push({label:`Saldo Conta Vinculada ${Q?"(Estimado)":""}`,value:z}),b.push({label:"Depósitos na Rescisão",value:H,description:"8% sobre Saldo, 13º e Aviso Indenizado."}),G>0&&b.push({label:`Multa Rescisória (${P*100}%)`,value:G,highlight:!0}));const L=c(p-v),X=[{title:"Verbas Rescisórias (Proventos)",items:u,subtotal:p,colorClass:"text-green-700"},{title:"Descontos",items:x,subtotal:v,colorClass:"text-red-700"}];T&&X.push({title:"FGTS (Saque)",items:b,subtotal:I,colorClass:"text-blue-700"});const pe=`
    Cálculo realizado conforme CLT e tabelas 2024. 
    Líquido TRCT: ${Z(L)}. 
    ${T?`Saque FGTS Estimado: ${Z(I)}.`:""}
    Descontos de INSS/IRRF seguem as regras de incidência sobre Saldo de Salário e 13º (Férias Indenizdas são isentas).
  `;return{trctTotal:L,fgtsTotal:I,total:c(L+(T?I:0)),sections:X,legalSummary:pe}},Ae=()=>{const[e,i]=A.useState(null),l=s=>{i(e===s?null:s)},t=[{id:"sem_justa",title:"Dispensa Sem Justa Causa",summary:"Quando a empresa demite o funcionário sem motivo grave.",content:"É a modalidade mais comum. Ocorre quando o empregador decide encerrar o contrato por vontade própria (corte de custos, desempenho, etc), sem que o trabalhador tenha cometido falta grave.",rights:["Saldo de Salário","Aviso Prévio (Trabalhado ou Indenizado)","13º Salário Proporcional","Férias Vencidas e Proporcionais + 1/3","Saque do FGTS","Multa de 40% do FGTS","Seguro-Desemprego (se habilitado)"]},{id:"pedido",title:"Pedido de Demissão",summary:"Quando o funcionário decide sair da empresa.",content:'Ocorre por iniciativa do trabalhador. Ao pedir demissão, o funcionário abre mão de alguns direitos "protetivos" que teria se fosse demitido.',rights:["Saldo de Salário","13º Salário Proporcional","Férias Vencidas e Proporcionais + 1/3"],loss:["Não saca o FGTS","Não recebe multa de 40%","Não recebe Seguro-Desemprego","Aviso Prévio: Se não cumprir, é descontado do acerto."]},{id:"acordo",title:"Rescisão por Comum Acordo (Art. 484-A)",summary:"Reforma Trabalhista: Acordo legal entre patrão e empregado.",content:"Criada em 2017, permite que empresa e funcionário decidam juntos pelo fim do contrato. É uma via de meio termo.",rights:["Saldo de Salário","50% do Aviso Prévio (se indenizado)","13º Salário Proporcional","Férias + 1/3","Saque de 80% do FGTS","Multa de 20% do FGTS"],loss:["Não tem direito ao Seguro-Desemprego."]},{id:"justa_causa",title:"Dispensa Por Justa Causa",summary:"Demissão por falta grave cometida pelo trabalhador.",content:"Ocorre quando o funcionário comete atos previstos no Art. 482 da CLT (roubo, agressão, abandono de emprego, insubordinação, etc).",rights:["Saldo de Salário","Férias Vencidas + 1/3 (se houver há mais de um ano)"],loss:["Perde 13º, Férias Proporcionais, Saque FGTS, Multa e Seguro-Desemprego."]},{id:"indireta",title:"Rescisão Indireta",summary:'"Justa Causa do Patrão". Quando a empresa comete falta grave.',content:"Ocorre quando a empresa descumpre o contrato (não paga salário, não deposita FGTS, assédio moral, perigo manifesto). O funcionário entra na justiça pedindo a rescisão.",rights:["Recebe EXATAMENTE os mesmos direitos da Dispensa Sem Justa Causa (Todos as verbas + Multa 40% + Saque FGTS + Seguro)."]},{id:"termino",title:"Término de Contrato (Experiência/Temporário)",summary:"Quando o contrato chega ao fim da data estipulada.",content:"Ocorre naturalmente no dia previsto para o fim do contrato de experiência ou temporário.",rights:["Saldo de Salário","13º Salário Proporcional","Férias Proporcionais + 1/3","Saque do FGTS (Depositos do período)"],loss:["Não há Aviso Prévio","Não há Multa de 40% do FGTS."]}];return a.jsxs("div",{className:"mt-8 mb-8 border border-indigo-100 rounded-2xl overflow-hidden bg-indigo-50/30",children:[a.jsxs("div",{className:"bg-indigo-100/50 p-4 border-b border-indigo-100",children:[a.jsxs("h4",{className:"font-bold text-indigo-900 flex items-center gap-2 text-lg",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Entenda os Tipos de Rescisão"]}),a.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Clique nos itens abaixo para ver os direitos de cada modalidade."})]}),a.jsx("div",{className:"divide-y divide-indigo-100",children:t.map(s=>a.jsxs("div",{className:"group",children:[a.jsxs("button",{onClick:()=>l(s.id),className:"w-full flex items-center justify-between p-4 text-left hover:bg-white transition-colors focus:outline-none",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block font-bold text-gray-800 text-base md:text-lg",children:s.title}),a.jsx("span",{className:"text-sm text-gray-500 font-medium",children:s.summary})]}),a.jsx("svg",{className:`w-6 h-6 text-gray-400 transform transition-transform duration-200 ${e===s.id?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e===s.id&&a.jsxs("div",{className:"p-5 bg-white text-base text-gray-700 animate-slide-up",children:[a.jsx("p",{className:"mb-3 font-medium leading-relaxed",children:s.content}),s.rights&&a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{className:"text-green-700 block mb-1",children:"✅ Direitos:"}),a.jsx("ul",{className:"list-disc pl-5 space-y-1 text-gray-600",children:s.rights.map((d,n)=>a.jsx("li",{children:d},n))})]}),s.loss&&a.jsxs("div",{children:[a.jsx("strong",{className:"text-red-700 block mb-1",children:"❌ O que perde/desconta:"}),a.jsx("ul",{className:"list-disc pl-5 space-y-1 text-gray-600",children:s.loss.map((d,n)=>a.jsx("li",{children:d},n))})]})]})]},s.id))})]})},ye=()=>{const[e,i]=A.useState({salary:"",startDate:"",endDate:"",reason:m.SEM_JUSTA_CAUSA,notice:C.TRABALHADO,fgtsBalance:"",dependents:"0",vacationDays:"0"}),[l,t]=A.useState(null),[s,d]=A.useState(""),n=(o,u)=>{i(x=>({...x,[o]:u})),d("")},D=()=>{if(!e.salary||!e.startDate||!e.endDate){d("Por favor, preencha o salário, data de admissão e data de demissão.");return}const o=new Date(e.startDate),u=new Date(e.endDate);if(isNaN(o.getTime())||isNaN(u.getTime())){d("Datas inválidas.");return}if(u<o){d("A data de demissão não pode ser anterior à data de admissão.");return}const x=Math.abs(u.getTime()-o.getTime());if(Math.ceil(x/(1e3*60*60*24))>25e3){d("O período de trabalho parece excessivamente longo. Verifique as datas.");return}let p=0;e.fgtsBalance!==""&&(p=parseFloat(e.fgtsBalance),(isNaN(p)||p<0)&&(p=0));const v=parseFloat(e.salary);if(isNaN(v)||v<=0){d("Informe um salário válido maior que zero.");return}const y=be(e.startDate,e.endDate,v,e.reason,e.notice,Math.max(0,parseFloat(e.vacationDays)||0),p,Math.max(0,parseInt(e.dependents)||0));t(y)},g=()=>{i({salary:"",startDate:"",endDate:"",reason:m.SEM_JUSTA_CAUSA,notice:C.TRABALHADO,fgtsBalance:"",dependents:"0",vacationDays:"0"}),t(null),d("")},f=e.reason!==m.JUSTA_CAUSA&&e.reason!==m.TERMINO_EXPERIENCIA&&e.reason!==m.ANTECIPADO_EMPREGADOR&&e.reason!==m.ANTECIPADO_EMPREGADO;return a.jsxs(ge,{title:"Calculadora de Rescisão",className:"max-w-5xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.jsx(K,{label:"Salário Bruto",name:"salary",value:e.salary,onChange:o=>n("salary",o),placeholder:"0,00",tooltip:"Salário base registrado em carteira."}),a.jsx(K,{label:"Saldo FGTS (Opcional)",name:"fgtsBalance",value:e.fgtsBalance,onChange:o=>n("fgtsBalance",o),placeholder:"0,00",tooltip:"Saldo atual para cálculo exato da multa."})]}),a.jsx("hr",{className:"border-gray-100 mb-8"}),a.jsx("h3",{className:"text-xl font-bold text-primary mb-6",children:"Período trabalhado"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.jsx("div",{children:a.jsx(re,{label:"Data de Admissão",value:e.startDate,onChange:o=>n("startDate",o)})}),a.jsx("div",{children:a.jsx(re,{label:"Data de Demissão",value:e.endDate,onChange:o=>n("endDate",o),helperText:"Último dia trabalhado."})})]}),a.jsx("hr",{className:"border-gray-100 mb-8"}),a.jsx("h3",{className:"text-xl font-bold text-primary mb-6",children:"Dados da Rescisão"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.jsx(ae,{label:"Motivo da Rescisão",name:"reason",value:e.reason,onChange:o=>n("reason",o.target.value),options:Object.values(m).map(o=>({value:o,label:o}))}),f&&a.jsx(ae,{label:"Aviso Prévio",name:"notice",value:e.notice,onChange:o=>n("notice",o.target.value),options:Object.values(C).map(o=>({value:o,label:o}))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10",children:[a.jsx(oe,{label:"Dependentes",value:e.dependents,onChange:o=>n("dependents",o.target.value),type:"number",min:"0",tooltip:"Para dedução de IRRF."}),a.jsx(oe,{label:"Férias vencidas (Dias)",value:e.vacationDays,onChange:o=>n("vacationDays",o.target.value),type:"number",min:"0",max:"60",placeholder:"Ex: 30"})]}),a.jsx(Ae,{}),s&&a.jsx("div",{className:"mb-8 p-4 bg-red-50 text-red-700 border border-red-200 rounded-xl text-base text-center font-medium animate-fade-in shadow-sm",children:s}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[a.jsx(ee,{onClick:D,icon:a.jsx(xe,{}),className:"flex-1 text-lg py-4",children:"Calcular Rescisão"}),a.jsx(ee,{variant:"secondary",onClick:g,className:"md:w-1/3 text-lg py-4",icon:a.jsx(fe,{}),children:"Limpar"})]}),l&&a.jsx(ve,{result:l})]})};export{ye as TerminationCalculator};
